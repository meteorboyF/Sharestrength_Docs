# Configuration

ShareStrength uses Laravel's configuration system with environment variables for sensitive data.

## Environment Variables

### Application Settings

```env
APP_NAME=ShareStrength
APP_ENV=local          # local, staging, production
APP_DEBUG=true         # Set to false in production
APP_URL=http://localhost
APP_KEY=               # Generated by php artisan key:generate
```

### Database Configuration

```env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=sharestrength
DB_USERNAME=your_username
DB_PASSWORD=your_password
```

### Session & Cache

```env
SESSION_DRIVER=database
SESSION_LIFETIME=120    # Minutes
QUEUE_CONNECTION=database
CACHE_STORE=database
```

### AI Services (Optional)

```env
# Google Gemini
GEMINI_API_KEY=your_api_key
GEMINI_CHAT_MODEL=gemini-2.5-flash

# Qdrant Vector Database
QDRANT_URL=http://localhost:6335
QDRANT_COLLECTION=site_knowledge
```

## Configuration Files

### `config/auth.php`

Defines authentication guards and providers:

```php
'guards' => [
    'web' => [...],
    'pwd' => [
        'driver' => 'session',
        'provider' => 'users',
    ],
    'helpmate' => [
        'driver' => 'session',
        'provider' => 'helpers',
    ],
    'admin' => [
        'driver' => 'session',
        'provider' => 'admins',
    ],
],

'providers' => [
    'users' => [
        'driver' => 'eloquent',
        'model' => App\Models\User::class,
    ],
    'helpers' => [
        'driver' => 'eloquent',
        'model' => App\Models\Helper::class,
    ],
    'admins' => [
        'driver' => 'eloquent',
        'model' => App\Models\Admin::class,
    ],
],
```

### `config/rag.php`

RAG system configuration:

```php
return [
    'gemini' => [
        'api_key' => env('GEMINI_API_KEY'),
        'chat_model' => env('GEMINI_CHAT_MODEL', 'gemini-2.5-flash'),
        'embedding_model' => env('GEMINI_EMBEDDING_MODEL', 'text-embedding-004'),
    ],
    'qdrant' => [
        'url' => env('QDRANT_URL', 'http://localhost:6333'),
        'collection' => env('QDRANT_COLLECTION', 'site_knowledge'),
    ],
    'embedding_dimensions' => 768,
    'temperature' => 0.2,
    'max_output_tokens' => 256,
    'top_k' => 6,
];
```

### `config/database.php`

Database connections and settings:

```php
'mysql' => [
    'driver' => 'mysql',
    'host' => env('DB_HOST', '127.0.0.1'),
    'port' => env('DB_PORT', '3306'),
    'database' => env('DB_DATABASE', 'sharestrength'),
    'username' => env('DB_USERNAME', 'root'),
    'password' => env('DB_PASSWORD', ''),
    'charset' => 'utf8mb4',
    'collation' => 'utf8mb4_unicode_ci',
],
```

## Rate Limiting

API endpoints have rate limiting configured:

| Endpoint | Limit |
|----------|-------|
| Chatbot `/ask` | 30 requests/minute |
| Chatbot `/stream` | 30 requests/minute |
| Chatbot `/history` | 60 requests/minute |
| General API | 60 requests/minute |

## File Storage

Configure file storage in `config/filesystems.php`:

```php
'disks' => [
    'local' => [
        'driver' => 'local',
        'root' => storage_path('app'),
    ],
    'public' => [
        'driver' => 'local',
        'root' => storage_path('app/public'),
        'url' => env('APP_URL').'/storage',
        'visibility' => 'public',
    ],
],
```

Create the storage symlink:

```bash
php artisan storage:link
```

## Mail Configuration

For development, mail is set to log driver:

```env
MAIL_MAILER=log
```

For production, configure SMTP:

```env
MAIL_MAILER=smtp
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USERNAME=your_username
MAIL_PASSWORD=your_password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@sharestrength.com
MAIL_FROM_NAME="${APP_NAME}"
```
